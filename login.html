<!--Name: Kimoya Francis
     Student ID: 2405940
     Course: Web Programming
     Individual Assessment #2 - E-Commerce Website
     Login Page
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>KimmyCakes | Login</title> <!-- Website Title-->
    <link rel="stylesheet" href="style.css">
    <!-- Google Font used for styling text -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>

<!-- Header Section: with background image, logo, tagline and navigation menu-->
<body class="login-page">
    <header class="header">
        <div class="picture-bg">
            <div class="logo"> 
                <img src="assets/logo.png" alt="Kimmy Cakes Logo" class="logo-image">
                <h1>KimmyCakes</h1>
                <p class="tagline">"Sweet Moments, Baked to Perfection"</p>
            </div>
        </div>
        
        <!-- Navigation Bar: with dropdown menu -->
        <nav class="nav">
            <ul>
                <li><a href="index.html">Home</a></li>

                <li class="dropdown">
                    <a href="products.html">All Products</a>
                    <ul class="dropdown-content">
                        <li><a href="products.html">Categories</a></li>
                        <li><a href="custom.html">Custom Orders</a></li>
                        <li><a href="cart.html">Add to Cart</a></li>
                    </ul>
                </li>
                    
                <li class="dropdown">
                    <a href="cart.html">Cart</a>
                    <ul class="dropdown-content">
                        <li><a href="payment.html">Payment & Billing</a></li>
                        <li><a href="shipping.html">Shipping Info</a></li>
                        <li><a href="invoice.html">Invoice</a></li>
                    </ul>
                </li>

                <li><a href="about.html">About Us</a></li>
                
                <!-- Account Page(active) -->
                <li class="dropdown">
                  <a href="#" id="active">Account</a>
                  <ul class="dropdown-content">
                        <li><a href="login.html" id="active">Login</a></li>
                        <li><a href="register.html">Register</a></li>
                        <li><a href="#">Forgot Password</a></li>
                        <li><a href="profile.html">Profile</a></li>
                        <li><a href="#">Order History</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="contact.html">Contact Us</a>
                    <ul class="dropdown-content">
                        <li><a href="#">Social Media</a></li>
                        <li><a href="#">Contacts</a></li>
                        <li><a href="#">Help</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Login Form Section -->
    <main class="login-box">
        <header class="header-box">
            <h1>Log Into Your Account</h1>
        </header>
        
        <!-- Login Form starts here -->
        <form id="loginForm" class="form-section">

            <!-- Username field -->
            <div class="field">
                <label for="username">Username:</label>
                <input type="text" id="username" placeholder="Please enter username" required>
            </div>

            <!-- Password field -->
            <div class="field">
                <label for="password">Password:</label>
                <input type="password" id="login-password" placeholder="Please enter passwordüîí" required>
           </div>
             
           <!-- Login button + forgot password -->
            <div class="options-column">
                <a href="#" class="plain-link">Forgot Password?</a>
                
                <button type="submit" class="btn primary">Log in</button>
            </div>

            <!-- Link to registration page -->
           <div class="create-row">
                <a href="register.html" class="btn link">Don't have an Account? Register Here</a>
            </div> 

            <!-- Hidden 'Remeber me' section(appears after successfull login) -->
            <div class="options-row hidden" id="rememberSection">
                    <label class="remember">
                    <input type="checkbox" id="rememberMe">Remember Me
                </label>
           </div>
       </form>

       <!-- Help Section -->
        <section class="help">
            <p>Need help? Contact Us <a href="mailto:2405940@utech.edu.jm">KimmyCakesSupport</a></p>
        </section>
    </main>

    <!-- Footer Section -->
    <footer class="footer">
        <p>For That Special Sweetness</p>
        <p>&copy; 2025 All Rights Reserved</p>
    </footer> 

    <!-- JavaScript Section -->
    <script>
        //Get list of registered users from localStorage
        let registrations = JSON.parse(localStorage.getItem("registrations")) || [];

        //Handle login form submission
        document.getElementById("loginForm").addEventListener("submit", function(event)
        { event.preventDefault();

            //Collect login information
            const username = document.getElementById("username").value.trim();
            const password = document.getElementById("login-password").value.trim();

            //Validate (username and password)
            if (username === "" || password === "") {
             alert("‚ö†Ô∏è Please enter both your username and password.");
             return;
            }

            //Password rule
            if (password.length < 8) {
             alert("‚ö†Ô∏è Password must be at least 8 characters.");
             return;
            }

            //Check if user exists
            const foundUser = registrations.find(
             (user) => user.username === username && user.password === password
            );

            //If the login is successful
            if (foundUser) {
                alert(`‚úÖWelcome, ${foundUser.fullName}! Login was successful.`);
       
                //save login for profile page
                localStorage.setItem("username", foundUser.username);
                localStorage.setItem("email", foundUser.email);


                //'Remember me'         
                const rememberMe = document.getElementById("rememberMe");
                if (rememberMe && rememberMe.checked) {
                    localStorage.setItem("rememberedUser", foundUser.username);
                } else {
                    localStorage.removeItem("rememberedUser");
                }

                //Goes to Profile
                window.location.href = "profile.html";
            }  
            else {
                alert("‚ùå Invalid username or password! Please try again or register first.");
            }
        });
        
        //load username if remeber me is on
        window.addEventListener("DOMContentLoaded", function () {
            const savedUsername = localStorage.getItem("rememberedUser");
            
            if (savedUsername) {
                document.getElementById("username").value = savedUsername;
                document.getElementById("rememberSection").classList.remove("hidden");
            }
        });
    </script>
</body>
</html>